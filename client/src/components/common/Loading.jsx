import React, { useEffect, useState } from 'react';
import styled, { css } from 'styled-components';

const Wrapper = styled.div`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  height: ${({ isMap }) => (isMap ? '100%' : '70vh')};

  @media ${({ theme }) => theme.device.mobile} {
    ${({ isMap }) =>
      isMap &&
      css`
        height: 175px;
      `}
  }
`;

const SVG = styled.svg.attrs({
  xmlns: 'http://www.w3.org/2000/svg',
  viewBox: '0 0 1100.51 1337.49',
})`
  width: ${({ loading1 }) => (loading1 ? '7.6rem' : '8rem')};
  height: ${({ loading1 }) => (loading1 ? '7.6rem' : '8rem')};
`;

export default function Loading({ isMap }) {
  const [display, setDisplay] = useState({
    loading0: { display: 'block' },
    loading1: { display: 'none' },
    loading2: { display: 'none' },
    loading3: { display: 'none' },
  });

  let count = 0;

  useEffect(() => {
    const interval = setInterval(() => {
      count++;
      let newCount = count % 4;
      const name = `loading${newCount}`;
      setDisplay({
        loading0: { display: 'none' },
        loading1: { display: 'none' },
        loading2: { display: 'none' },
        loading3: { display: 'none' },
        [name]: { display: 'block' },
      });
    }, 500);
    return () => {
      setDisplay({
        loading0: { display: 'block' },
        loading1: { display: 'none' },
        loading2: { display: 'none' },
        loading3: { display: 'none' },
      });
      clearInterval(interval);
    };
  }, []);
  return (
    <Wrapper isMap={isMap}>
      {/* <LoadingImg /> */}
      <SVG id='loading0' style={display['loading0']}>
        <defs></defs>
        <circle style={{ fill: '#e9edf3' }} cx='521.46' cy='521.46' r='521.46' />
        <path
          style={{ fill: '#0084ff' }}
          d='M824.41,242.54a27.41,27.41,0,0,0-24-24c-46.36-5.52-87.89,6-111.08,30.71l-71.36,76.18h0l0,0-25.37,27.08-58.88-4.14a13.88,13.88,0,0,0,.66-4.21,13.57,13.57,0,0,0-4-9.62L508.48,312.7a13.6,13.6,0,0,0-19.24,0l-27.63,27.63-25.87-3.55a13.46,13.46,0,0,0-3.71-6.92L410.19,308a14,14,0,0,0-19.25,0L371,327.92,265.37,313.44a13.61,13.61,0,0,0-11.47,3.86l-32.77,32.77a13.61,13.61,0,0,0,3.94,22l112.6,51.71.23.23a13.52,13.52,0,0,0,9,4l126.4,56.39-123,143.69-77.57.44a13.6,13.6,0,0,0-9.54,4l-29.81,29.81a13.61,13.61,0,0,0,3.22,21.64l79.81,42.52L359,806.25a13.61,13.61,0,0,0,21.63,3.22l29.81-29.81a13.57,13.57,0,0,0,4-9.55l.44-77.56,143.69-123,57,127.84a13.67,13.67,0,0,0,3.54,7.8l51.72,112.61a13.62,13.62,0,0,0,10,7.72,14,14,0,0,0,2.41.21,13.61,13.61,0,0,0,9.62-4L725.61,789a13.63,13.63,0,0,0,3.87-11.47L715,671.87,734.9,652a13.62,13.62,0,0,0,0-19.24l-21.25-21.25a13.55,13.55,0,0,0-7.45-3.81l-3.61-26.37,27.63-27.62a13.62,13.62,0,0,0,0-19.25L709,513.19A13.59,13.59,0,0,0,694.65,510l-4.24-59.65,103.3-96.78C818.45,330.43,829.93,288.91,824.41,242.54ZM353.78,401.22c-.4-.18-.82-.34-1.23-.48s-.86-.48-1.31-.69l-97-44.56,14.16-14.17L374,355.8a13.6,13.6,0,0,0,11.47-3.86l15.06-15.05,2.71,2.71a13.61,13.61,0,0,0,9.18,21.46l52.15,7.15a13.62,13.62,0,0,0,11.47-3.86l22.78-22.78,2.59,2.59-6.2,6.2a13.61,13.61,0,0,0,8.67,23.2L570,378.21l-77.18,85ZM692.7,548.71l6.65-6.65,2,2-22.78,22.78a13.58,13.58,0,0,0-3.86,11.46L682,631.5a13.61,13.61,0,0,0,22,8.79l2.06,2.06-15,15.06a13.61,13.61,0,0,0-3.87,11.46l14.48,105.68-14.16,14.16-44.56-97c-.15-.32-.3-.62-.47-.92s-.21-.54-.33-.81L579.5,549.73l85.22-76.81,4.78,67.13a13.61,13.61,0,0,0,23.2,8.66Zm-3.38-134.6L535.58,552.67l.39.43L392.45,675.92a13.58,13.58,0,0,0-4.76,10.26l-.45,78.19-12.86,12.86L338.55,710a13.66,13.66,0,0,0-5.61-5.61l-67.25-35.82,12.86-12.87,78.19-.44A13.6,13.6,0,0,0,367,650.47L496.34,499.33l.25.23L638.1,343.68h0l71.07-75.86c17.28-18.46,50.16-26.78,88.21-22.06,4.51,37.81-3.83,70.7-22.28,88Z'
        />
      </SVG>
      <SVG id='loading1' loading1 style={display['loading1']}>
        <circle style={{ fill: '#3487f7' }} cx='579.05' cy='521.46' r='521.46' />
        <path
          style={{ fill: '#e9edf3' }}
          d='M824.61,527.36H723.93v-31.8a22,22,0,0,0-22-22H622.66a22,22,0,0,0-22,22v31.8h-28V399.87A37.77,37.77,0,0,0,535,362.14H494.9V260.48A21.9,21.9,0,0,0,473,238.6H395.46a21.9,21.9,0,0,0-21.88,21.88V362.14H333.49a37.76,37.76,0,0,0-37.72,37.73v324.6a37.73,37.73,0,0,0,36.29,37.65l2,31.71a11.16,11.16,0,0,0,11.14,10.48H371.5a11.16,11.16,0,0,0,11.14-10.48l1.95-31.63h77.69v4.38A37.77,37.77,0,0,0,500,804.31h324.6a37.77,37.77,0,0,0,37.73-37.73V565.08A37.77,37.77,0,0,0,824.61,527.36ZM623,495.9h78.6v30.16H623Zm-227.11-235h76.68V362.14H395.9ZM361,782h-5.36l-1.22-19.79h7.8Zm171.24,0H500a15.43,15.43,0,0,1-15.41-15.41V565.08A15.43,15.43,0,0,1,500,549.68h32.24Zm18.14-254.63H503.71V434.21a11.16,11.16,0,1,0-22.32,0v98.1a37.74,37.74,0,0,0-19.11,32.77V739.87H333.49a15.42,15.42,0,0,1-15.4-15.4V399.87a15.42,15.42,0,0,1,15.4-15.41H535a15.42,15.42,0,0,1,15.4,15.41ZM768.09,782H554.58V549.68H768.09ZM840,766.58A15.42,15.42,0,0,1,824.61,782H790.42V549.68h34.19a15.42,15.42,0,0,1,15.4,15.4Z'
        />
        <path
          style={{ fill: '#e9edf3' }}
          d='M376.85,423a11.17,11.17,0,0,0-11.16,11.17V690.13a11.17,11.17,0,0,0,22.33,0V434.21A11.17,11.17,0,0,0,376.85,423Z'
        />
        <path
          style={{ fill: '#e9edf3' }}
          d='M434.24,423a11.17,11.17,0,0,0-11.16,11.17V690.13a11.16,11.16,0,1,0,22.32,0V434.21A11.16,11.16,0,0,0,434.24,423Z'
        />
      </SVG>
      <SVG id='loading2' style={display['loading2']}>
        <circle style={{ fill: '#e9edf3' }} cx='521.46' cy='521.46' r='521.46' />
        <path
          style={{ fill: '#0085ff' }}
          d='M860.42,816.44,737.93,531a13.62,13.62,0,0,0-12.51-8.25H618.31c29.39-50,55.12-109.76,55.12-165.58,0-82.55-67.16-149.7-149.7-149.7S374,274.61,374,357.16c0,55.82,25.73,115.56,55.12,165.58H322a13.62,13.62,0,0,0-12.44,8.08l-127,285.45A13.6,13.6,0,0,0,195,835.41h20.35c.55,0,1.75.05,3.55.05,1.13,0,2.5,0,4.09-.05H847.91a13.61,13.61,0,0,0,12.51-19ZM401.24,357.16a122.49,122.49,0,0,1,245,0c0,97.56-91.58,214.66-122.48,251.41C492.82,571.82,401.24,454.72,401.24,357.16ZM343,808.19l-8.73-22.84a357.65,357.65,0,0,1-45.69,14l2.08,8.85H241.59l-.1-1.11c-8.05.75-14.46,1-18.85,1.11H216L330.87,550H446.06a751,751,0,0,0,67.63,88.58,13.6,13.6,0,0,0,20.07,0A751,751,0,0,0,601.39,550H716.46l33.25,77.51-5.73-.21-.82,27.21c6,.18,12.2.44,18.46.74l65.64,153Z'
        />
        <path
          style={{ fill: '#0085ff' }}
          d='M588.75,357.16a65,65,0,1,0-65,65A65.1,65.1,0,0,0,588.75,357.16Zm-102.83,0A37.81,37.81,0,1,1,523.73,395,37.84,37.84,0,0,1,485.92,357.16Z'
        />
        <path
          style={{ fill: '#0085ff' }}
          d='M642.71,630.65l3,27.05c15.14-1.69,31.42-2.8,48.4-3.31l-.82-27.21C675.6,627.71,658.57,628.88,642.71,630.65Z'
        />
        <path
          style={{ fill: '#0085ff' }}
          d='M377.54,765.26l13.19,23.81a351.26,351.26,0,0,0,43.19-28.25l-16.55-21.61A324.7,324.7,0,0,1,377.54,765.26Z'
        />
        <path
          style={{ fill: '#0085ff' }}
          d='M454.43,707.27,472.06,728a291.9,291.9,0,0,1,38.36-27.83l-14.1-23.29A319.72,319.72,0,0,0,454.43,707.27Z'
        />
        <path
          style={{ fill: '#0085ff' }}
          d='M542.91,654l9.87,25.36a323.4,323.4,0,0,1,45.52-13.78l-6-26.55A350.13,350.13,0,0,0,542.91,654Z'
        />
      </SVG>
      <SVG id='loading3' style={display['loading3']}>
        <circle style={{ fill: '#3487f7' }} cx='521.46' cy='521.46' r='521.46' />
        <path
          style={{ fill: '#e9edf3' }}
          d='M826.23,541.89l-74.49-67.5a13.2,13.2,0,0,0-9.43-3.53l-174.65,3.68V418l175.23-3.69a13.61,13.61,0,0,0,13.32-13.61V284.28a13.62,13.62,0,0,0-13.32-13.61L567.66,267V230.3a46.2,46.2,0,1,0-92.4,0V265L300.6,261.36h-.28a13.6,13.6,0,0,0-9.14,3.53l-74.49,67.5a13.61,13.61,0,0,0,0,20.17l74.49,67.51a13.59,13.59,0,0,0,9.14,3.52h.28l174.66-3.68v56.58L300,480.18a13.6,13.6,0,0,0-13.32,13.6V610.17A13.61,13.61,0,0,0,300,623.78l175.23,3.69V858.81h27.22V628l38,.8v230h27.22V629.41l174.65,3.68h.29a13.63,13.63,0,0,0,9.14-3.52l74.49-67.51a13.61,13.61,0,0,0,0-20.17ZM502.48,230.3a19,19,0,1,1,38,0v36.11l-38-.8Zm-197,166L246.1,342.48l59.34-53.79,169.82,3.58v.16h7.81L729,297.61v89.74Zm235,22.28v56.57l-38,.8V419.34Zm197,187.22-423.54-8.91V507.11l423.54-8.92L796.82,552Z'
        />
      </SVG>
    </Wrapper>
  );
}
